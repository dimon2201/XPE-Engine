struct VSOut
{
    float4 positionClip : SV_POSITION;
    float2 texcoord : XPE_UV;
};

struct PSOut
{
    float4 color : SV_Target0;
};

Texture2D<float4> ColorTexture : register(t0);
Texture2D<float4> AOTexture : register(t1);

PSOut ps_main(VSOut psIn)
{
    uint width = 0;
    uint height = 0;
    uint sampleCount = 0;
    ColorTexture.GetDimensions(width, height);

    float3 averageColor;
    averageColor = ColorTexture.Load(int3(psIn.texcoord * float2(width, height), 0)).xyz;// + ColorTexture.Load(int3(psIn.texcoord * float2(width, height), 0), 1).xyz;
    //averageColor *= float3(0.5, 0.5, 0.5);

    PSOut psOut;
    psOut.color = float4(averageColor, 1.0) *
                  AOTexture.Load(int3(psIn.texcoord * float2(width, height), 0));

    return psOut;
}