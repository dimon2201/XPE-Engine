

struct VSOut
{
    float4 positionClip : SV_POSITION;
    float2 uv : XPE_UV;
};

struct PSOut
{
    float4 color : SV_Target0;
};

Texture2D<float4> ColorTexture : register(t0);
Texture2D<float4> AOTexture : register(t1);

PSOut ps_main(VSOut psIn)
{
    uint colorWidth = 0;
    uint colorHeight = 0;
    ColorTexture.GetDimensions(colorWidth, colorHeight);

    float3 color = ColorTexture.Load(int3(float2(colorWidth, colorHeight) * psIn.uv, 0)).xyz;
    color = TonemapExp(color, CameraExposure);
    float3 ao = AOTexture.Load(int3(float2(colorWidth, colorHeight) * psIn.uv, 0)).xyz;

    PSOut psOut;
    psOut.color = float4(color, 1.0) * float4(ao, 1.0);

    return psOut;
}